{{ define "main" }}
<header class="page-header">
  <h1 class="page-title">{{ .Title }}</h1>
  {{ with .Description }}
  <p class="page-description">{{ . }}</p>
  {{ end }}
</header>

{{ if .Content }}
<div class="page-content">
  {{ .Content }}
</div>
{{ end }}

{{ if eq .Section "rnd" }}
<div class="projects-grid">
  {{ range .Pages }}
  <article class="project-card">
    <div class="project-card-image">
      {{ with .Params.image }}
      <img src="{{ . | relURL }}" alt="{{ $.Title }}">
      {{ end }}
    </div>
    <div class="project-card-body">
      <h2 class="project-card-title">
        <a href="{{ .Permalink }}">{{ .Title }}</a>
      </h2>
      <p class="project-card-description">{{ .Summary | truncate 120 }}</p>
      {{ with .Params.tech }}
      <div class="project-card-tech">
        {{ range . }}
        <span class="tech-tag">{{ . }}</span>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </article>
  {{ end }}
</div>
{{ else }}
<div class="posts-grid">
  {{ range .Pages }}
  <article class="post-card">
    <h2 class="post-card-title">
      <a href="{{ .Permalink }}">{{ .Title }}</a>
    </h2>
    <p class="post-card-excerpt">{{ .Summary | truncate 180 }}</p>
    <div class="post-card-meta">
      <span class="post-card-date">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
      </span>
      {{ with .Params.tags }}
      <div class="post-card-tags">
        {{ range first 3 . }}
        <a href="{{ "tags/" | relURL }}{{ . | urlize }}/" class="tag">{{ . }}</a>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </article>
  {{ end }}
</div>
{{ end }}
{{ end }}
